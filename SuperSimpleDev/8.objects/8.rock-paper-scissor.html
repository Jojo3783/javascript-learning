<!DOCTYPE html>
<html>
<head>
  <title>Rock-Paper-scissors</title>
</head>
  <body>
    <p>Rock-Paper-scissors</p>
    <button onclick="
      playerChoice = 'Rock';
      PlayGame(playerChoice);
    ">Rock</button>

    <button onclick="
      playerChoice = 'Paper';
      PlayGame(playerChoice);
    ">Paper</button>

    <button onclick="
      playerChoice = 'Scissor';
      PlayGame(playerChoice);
    ">Scissor</button>

    <button onclick="
      score.win = 0;
      score.lost = 0;
      score.tie = 0;
    ">Reset Score</button>

    <script>

                  
      let score = JSON.parse(localStorage.getItem('score')) || {
        win: 0,
        lost: 0,
        tie: 0
      };//score is a init object or localStorage object transfrom by parse(JSON to javascipt object)


      function PlayGame(playerMove) {
        const ComputerMove = pickComputerMove();      
        if(playerMove === 'Scissor') {
          if(ComputerMove === 'Rock') {
            result = 'You lost.';
          }
          else if(ComputerMove === 'Paper') {
            result = 'You win.';
          }
          else if(ComputerMove === 'Scissor') {
            result = 'Tie.';
          }
        }
        else if(playerMove === 'Paper') {
          if(ComputerMove === 'Rock') {
            result = 'You win.';
          }
          else if(ComputerMove === 'Paper') {
            result = 'Tie.';
          }
          else if(ComputerMove === 'Scissor') {
            result = 'You lost.';
          }
        }
        else if(playerMove === 'Rock') {
          if(ComputerMove === 'Rock') {
            result = 'Tie.';
          }
          else if(ComputerMove === 'Paper') {
            result = 'You lost.';
          }
          else if(ComputerMove === 'Scissor') {
            result = 'You win.';
          }
        }
        if (result === 'Tie.') {
          score.tie += 1;
        }
        else if (result === 'You lost.') {
          score.lost += 1;
        }
        else if (result === 'You win.') {
          score.win += 1;
        }
        localStorage.setItem('score', JSON.stringify(score));//score is a object but JSON.setitem need to be a string so use JSON.stringify to convert a object to string

        alert(`You pick ${playerMove}. Computer pick ${ComputerMove}. ${result}\nWins: ${score.win}, Losses: ${score.lost}, Ties: ${score.tie}`);
        
      }
      function pickComputerMove() {
        const computerChoice = Math.random();
        let computerMove = '';
        if(computerChoice >= 0 && computerChoice < 1/3) {
          computerMove = 'Rock';
        }
        else if(computerChoice >= 1/3 && computerChoice < 2/3) {
          computerMove = 'Paper';
        }
        else if(computerChoice >= 2/3 && computerChoice < 1) {
          computerMove = 'Scissor ';
        }
        return computerMove;
      }
      pickComputerMove();
      let playerChoice = '';
      let result = '';
    </script>
  </body>
</html>
